---
layout: post
title:  "PID控制器"
category: simulink
tags: simulink
---


首先帮大家解决一下什么是PID调节，为什么就要这样的疑惑。 
PID是比例，积分，微分的英文单词的首字母的简称。

下面举个例子说明一下PID，让大家有个感官的认识。

一个人闭眼走路，假设他知道自己离目的地有100米远，那么他就可以以每秒一米一步这样的速度走向目的地，100米刚刚好是100步，这是一个非常理想化的现象。假设他不知道目的地有多远，目的地可能是1000米也有可能是10000米，他用每秒每步3米得速度向前，很不巧的是这个目的地在80米处，他走了26步时刚刚好差2米，走27步有刚刚好又多出1米，这就是所谓的稳态误差，如果这个人知道目的地在大概15米处得地方，开始这个人以每秒一米一步的速度，走完一步然后目测一下离目的地还有多远，结果发现还剩下大概14米，显然一米一步太慢，因此这个人决定每秒大于一米一步走，得出一条式子，

$$ y=K_p e(t) $$

其中

* y为下一次要每步要走的距离，
* e(t) 为目测距离，也就是偏差，换句话说就是自己走了的距离跟要走的距离也就是目的地的误差，
* $K_p$就是一个常数，假设我们把Kp设置为0.5， 

$y=K_Pe(t)$可以得出y=7；也就是说那个人下一步要以每秒7米得速度走，重复上述的过程，7+1共走了8米，然后目测一下距离15米处还有多远，还有7米得误差，所以下一步要走3.5米，然后在重复，发现最后会出现一个稳态的误差，也就是多走一步会超出目的地，少走一步又没到目的地。



当然这个上述的例子情况非常特殊，大家可能觉得最后那些误差可以忽略，但是实际应用中，肯定没有人走路的那么特殊，按照这种线性比例下去最后得到的误差会非常大，所以就引入了一个积分的概念，积分的数学几何定义是在区间[a, b]里连续的非负曲线与直线x=a，x=b围成的图形的面积。

从积分的定义可以得到一个函数:

$$ y={1\over{T_i}}\int e(t)dt$$

其中

* Ti为积分时间，
* e（t）就是误差了。
* Y就是输出，它是个不定积分，事实上把它融入到上述人走路的例子它是个定积分，从0 到t时刻的误差的对时间的积分，也就是说误差曲线e（t）与时间轴围成的面积，

积分时间Ti是一个常量，可以自己规定大小，很明显，由上式得y为e（t）与t所围成的图形的面积的除以Ti的值，Ti越大y越小，Ti越小y越大，大了系统会动荡，所以要慢慢调节系数。（相当于我们在给电视调台的时候，当你知道一个频段节目比较少的时候，你会快速的调过这个频段（相当于所说的比例控制P），在有电视信号但不太清的时候，你就要进行微调了(相当于这楼所说的积分控制I)）


下面是关于积分跟比例的专业阐述： 

比例（P）控制 
　　比例控制是一种最简单的控制方式。其控制器的输出与输入误差信号成比例关系。当仅有比例控制时系统输出存在稳态误差（Steady-state error）。 

积分（I）控制 
　　在积分控制中，控制器的输出与输入误差信号的积分成正比关系。对一个自动控制系统，如果在进入稳态后存在稳态误差，则称这个控制系统是有稳态误差的或简称有差系统（System with Steady-state Error）。为了消除稳态误差，在控制器中必须引入“积分项”。积分项对误差取决于时间的积分，随着时间的增加，积分项会增大。这样，即便误差很小，积分项也会随着时间的增加而加大，它推动控制器的输出增大使稳态误差进一步减小，直到等于零。因此，比例+积分(PI)控制器，可以使系统在进入稳态后无稳态误差。 

微分调节就是偏差值的变化率。
例如，如果输入偏差值线性变化，则在调节器输出侧叠加一个恒定的调节量。__大部分控制系统不需要调节微分时间。因为只有时间滞后的系统才需要附加这个参数。__如果画蛇添足加上这个参数反而会使系统的控制受到影响。 

在楼上那个调节温度的那个例子里，人可以通过观察温度的变化率来指导自己快速调节和微调的时机，但是计算机可不会这样调节，那么就要通过一个PID得到一个输出值来调节了。

$$Y=T_d {d e(t)\over dt}$$

下面是一段关于微分的专业阐述： 
控制器的输出y 与输入误差信号e（t）的微分（即误差的变化率）成正比关系。 自动控制系统在克服误差的调节过程中可能会出现振荡甚至失稳。其原因是由于存在有较大惯性组件（环节）或有滞后(delay)组件，具有抑制误差的作用， 其变化总是落后于误差的变化。解决的办法是使抑制误差的作用的变化“超前”，即在误差接近零时，抑制误差的作用就应该是零。这就是说，在控制器中仅引入 “比例”项往往是不够的，比例项的作用仅是放大误差的幅值，而目前需要增加的是“微分项”，它能预测误差变化的趋势，这样，具有比例+微分的控制器，就能 够提前使抑制误差的控制作用等于零，甚至为负值，从而避免了被控量的严重超调。所以对有较大惯性或滞后的被控对象，比例+微分(PD)控制器能改善系统在 调节过程中的动态特性。

$$y = K_p[e(t)+{1\over{T_i}}\int e(t)dt + T_d {d e(t)\over dt}]$$

